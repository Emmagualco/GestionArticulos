{"ast":null,"code":"import _objectSpread from\"D:/GitHub/GestionArticulos/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ArticleForm(){const[form,setForm]=useState({codigo:'',descripcion:'',precio:''});const[errors,setErrors]=useState({});const[success,setSuccess]=useState('');const[loading,setLoading]=useState(false);// Validaci칩n en tiempo real\nconst validate=(field,value)=>{let error='';if(field==='codigo'){if(!value.trim())error='El c칩digo es obligatorio.';else if(!/^\\d+$/.test(value))error='Solo n칰meros.';}if(field==='descripcion'){if(!value.trim())error='La descripci칩n es obligatoria.';else if(value.length<2)error='M칤nimo 2 caracteres.';}if(field==='precio'){if(!value.trim())error='El precio es obligatorio.';else if(!/^\\d+(\\.\\d{1,2})?$/.test(value))error='Formato inv치lido. Ej: 123 o 123.45';}return error;};const handleChange=e=>{const{name,value}=e.target;setForm(_objectSpread(_objectSpread({},form),{},{[name]:value}));setErrors(_objectSpread(_objectSpread({},errors),{},{[name]:validate(name,value)}));setSuccess('');};const handleSubmit=async e=>{e.preventDefault();let newErrors={};Object.keys(form).forEach(field=>{const error=validate(field,form[field]);if(error)newErrors[field]=error;});setErrors(newErrors);if(Object.keys(newErrors).length>0)return;setLoading(true);try{await axios.post('/api/articulos/',form);setSuccess('Art칤culo creado exitosamente.');setForm({codigo:'',descripcion:'',precio:''});setErrors({});setTimeout(()=>window.location.reload(),1200);}catch(err){setSuccess('');setErrors({submit:'Error al crear art칤culo.'});}setLoading(false);};const handleClear=()=>{setForm({codigo:'',descripcion:'',precio:''});setErrors({});setSuccess('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-create-wrapper\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"form-title\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"crear\",style:{marginRight:8},children:\"\\uD83D\\uDCDD\"}),\"Crear art\\xEDculo\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"form-create-form\",autoComplete:\"off\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"codigo\",type:\"text\",placeholder:\"C\\xF3digo\",value:form.codigo,onChange:handleChange,required:true,autoComplete:\"off\",className:errors.codigo?'input-error':'',\"aria-label\":\"C\\xF3digo\",title:\"Solo n\\xFAmeros\"}),errors.codigo&&/*#__PURE__*/_jsx(\"span\",{className:\"error-tooltip\",children:errors.codigo})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"descripcion\",type:\"text\",placeholder:\"Descripci\\xF3n\",value:form.descripcion,onChange:handleChange,required:true,autoComplete:\"off\",className:errors.descripcion?'input-error':'',\"aria-label\":\"Descripci\\xF3n\",title:\"M\\xEDnimo 2 caracteres\"}),errors.descripcion&&/*#__PURE__*/_jsx(\"span\",{className:\"error-tooltip\",children:errors.descripcion})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"precio\",type:\"text\",placeholder:\"Precio (ej: 123 o 123.45)\",value:form.precio,onChange:handleChange,required:true,autoComplete:\"off\",className:errors.precio?'input-error':'',\"aria-label\":\"Precio\",title:\"Ingrese un n\\xFAmero entero o decimal, m\\xE1ximo dos decimales\"}),errors.precio&&/*#__PURE__*/_jsx(\"span\",{className:\"error-tooltip\",children:errors.precio})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-panel-button\",disabled:loading,children:loading?'Creando...':'Crear'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"form-panel-button clear-btn\",onClick:handleClear,disabled:loading,children:\"Limpiar\"})]}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),errors.submit&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.submit})]});}export default ArticleForm;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","ArticleForm","form","setForm","codigo","descripcion","precio","errors","setErrors","success","setSuccess","loading","setLoading","validate","field","value","error","trim","test","length","handleChange","e","name","target","_objectSpread","handleSubmit","preventDefault","newErrors","Object","keys","forEach","post","setTimeout","window","location","reload","err","submit","handleClear","className","children","role","style","marginRight","onSubmit","autoComplete","type","placeholder","onChange","required","title","disabled","onClick"],"sources":["D:/GitHub/GestionArticulos/frontend/src/components/ArticleForm.js"],"sourcesContent":["\r\nimport React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction ArticleForm() {\r\n\tconst [form, setForm] = useState({ codigo: '', descripcion: '', precio: '' });\r\n\tconst [errors, setErrors] = useState({});\r\n\tconst [success, setSuccess] = useState('');\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\t// Validaci칩n en tiempo real\r\n\tconst validate = (field, value) => {\r\n\t\tlet error = '';\r\n\t\tif (field === 'codigo') {\r\n\t\t\tif (!value.trim()) error = 'El c칩digo es obligatorio.';\r\n\t\t\telse if (!/^\\d+$/.test(value)) error = 'Solo n칰meros.';\r\n\t\t}\r\n\t\tif (field === 'descripcion') {\r\n\t\t\tif (!value.trim()) error = 'La descripci칩n es obligatoria.';\r\n\t\t\telse if (value.length < 2) error = 'M칤nimo 2 caracteres.';\r\n\t\t}\r\n\t\tif (field === 'precio') {\r\n\t\t\tif (!value.trim()) error = 'El precio es obligatorio.';\r\n\t\t\telse if (!/^\\d+(\\.\\d{1,2})?$/.test(value)) error = 'Formato inv치lido. Ej: 123 o 123.45';\r\n\t\t}\r\n\t\treturn error;\r\n\t};\r\n\r\n\tconst handleChange = e => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetForm({ ...form, [name]: value });\r\n\t\tsetErrors({ ...errors, [name]: validate(name, value) });\r\n\t\tsetSuccess('');\r\n\t};\r\n\r\n\tconst handleSubmit = async e => {\r\n\t\te.preventDefault();\r\n\t\tlet newErrors = {};\r\n\t\tObject.keys(form).forEach(field => {\r\n\t\t\tconst error = validate(field, form[field]);\r\n\t\t\tif (error) newErrors[field] = error;\r\n\t\t});\r\n\t\tsetErrors(newErrors);\r\n\t\tif (Object.keys(newErrors).length > 0) return;\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tawait axios.post('/api/articulos/', form);\r\n\t\t\tsetSuccess('Art칤culo creado exitosamente.');\r\n\t\t\tsetForm({ codigo: '', descripcion: '', precio: '' });\r\n\t\t\tsetErrors({});\r\n\t\t\tsetTimeout(() => window.location.reload(), 1200);\r\n\t\t} catch (err) {\r\n\t\t\tsetSuccess('');\r\n\t\t\tsetErrors({ submit: 'Error al crear art칤culo.' });\r\n\t\t}\r\n\t\tsetLoading(false);\r\n\t};\r\n\r\n\tconst handleClear = () => {\r\n\t\tsetForm({ codigo: '', descripcion: '', precio: '' });\r\n\t\tsetErrors({});\r\n\t\tsetSuccess('');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"form-create-wrapper\">\r\n\t\t\t<h2 className=\"form-title\">\r\n\t\t\t\t<span role=\"img\" aria-label=\"crear\" style={{marginRight:8}}>游닇</span>\r\n\t\t\t\tCrear art칤culo\r\n\t\t\t</h2>\r\n\t\t\t<form onSubmit={handleSubmit} className=\"form-create-form\" autoComplete=\"off\">\r\n\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"codigo\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"C칩digo\"\r\n\t\t\t\t\t\tvalue={form.codigo}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tclassName={errors.codigo ? 'input-error' : ''}\r\n\t\t\t\t\t\taria-label=\"C칩digo\"\r\n\t\t\t\t\t\ttitle=\"Solo n칰meros\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{errors.codigo && <span className=\"error-tooltip\">{errors.codigo}</span>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"descripcion\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Descripci칩n\"\r\n\t\t\t\t\t\tvalue={form.descripcion}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tclassName={errors.descripcion ? 'input-error' : ''}\r\n\t\t\t\t\t\taria-label=\"Descripci칩n\"\r\n\t\t\t\t\t\ttitle=\"M칤nimo 2 caracteres\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{errors.descripcion && <span className=\"error-tooltip\">{errors.descripcion}</span>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"precio\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Precio (ej: 123 o 123.45)\"\r\n\t\t\t\t\t\tvalue={form.precio}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\tclassName={errors.precio ? 'input-error' : ''}\r\n\t\t\t\t\t\taria-label=\"Precio\"\r\n\t\t\t\t\t\ttitle=\"Ingrese un n칰mero entero o decimal, m치ximo dos decimales\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{errors.precio && <span className=\"error-tooltip\">{errors.precio}</span>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button type=\"submit\" className=\"form-panel-button\" disabled={loading}>\r\n\t\t\t\t\t{loading ? 'Creando...' : 'Crear'}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button type=\"button\" className=\"form-panel-button clear-btn\" onClick={handleClear} disabled={loading}>\r\n\t\t\t\t\tLimpiar\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t\t{success && <div className=\"success-message\">{success}</div>}\r\n\t\t\t{errors.submit && <div className=\"error-message\">{errors.submit}</div>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ArticleForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}